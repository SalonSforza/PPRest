<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body class="bg-light">

<form id="loginForm" class="container d-flex flex-column align-items-center">
    <h1 class="text-center mt-2 w-100">Please sign in</h1>
    <div class="text-center w-25">
        <input class="form-control align-center" type="text" id="username" name="username" placeholder="Enter email" required />
    </div>

    <div class="text-center w-25">
        <input class="form-control align-center" type="password" id="password" name="password" placeholder="Enter password" required />
    </div>

    <div class="text-center w-25">
        <button type="submit" class="btn btn-primary w-100 mt-1">Login</button>
    </div>

    <div id="errorMessage" style="color: crimson" class="text-center w-100" hidden>
        Wrong password or email
    </div>
</form>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script>
    // Get references to the form and error message div
    const form = document.getElementById('loginForm');
    const errorMessage = document.getElementById('errorMessage');

    form.addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent the default form submission

        // Collect the form data
        const formData = new FormData(form);

        // Send the data via Fetch API
        try {
            const response = await fetch('/login', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                // If the login is successful, you can redirect the user or handle success
                window.location.href = '/admin'; // Example redirect after successful login
            } else {
                // If the login fails, display an error message
                errorMessage.hidden = false;
            }
        } catch (error) {
            console.error('Error during fetch:', error);
            errorMessage.hidden = false;
        }
    });
</script>

</body>
</html>